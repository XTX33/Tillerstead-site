---

## ğŸ¯ Goal
- **Continuously improve** every incoming Issue, Pull Request (PR), and Agent Task.  
- **Upgrade all HTML** to the latest, fastest, and most SEOâ€‘friendly standards.  
- **Refresh every CSS file** into a cohesive, brandâ€‘centric theme that makes Tillerstead instantly recognizable, memorable, and respected.

---

## ğŸ› ï¸ Core Workflow Overview
| Step | Trigger | Action | Result |
|------|---------|--------|--------|
| 1ï¸âƒ£ | New **Issue**, **PR**, or **Agent Task** opened | Copilot runs a *preâ€‘review* script. | Generates a checklist of required checks (HTML, SEO, CSS). |
| 2ï¸âƒ£ | After the preâ€‘review | Copilot proposes **inline suggestions** for each file touched. | Immediate, actionable fixes. |
| 3ï¸âƒ£ | PR marked **Ready for Review** | Copilot runs a **full site audit** (HTML, SEO, CSS). | Summary comment with pass/fail and improvement list. |
| 4ï¸âƒ£ | PR merged to `main` | CI pipeline triggers a **themeâ€‘generation job**. | Updated CSS bundle + version bump. |
| 5ï¸âƒ£ | Nightly schedule (optional) | Copilot runs a **siteâ€‘wide health check**. | Detects drift, opens autoâ€‘generated Issues for remediation. |

---

## ğŸ“‹ Detailed Instructions for Copilotâ€¯CUSTOM

### 1ï¸âƒ£ Preâ€‘review Script (run on every new Issue/PR/Task)

```yaml
name: copilot-pre-review
on:
  issues:
    types: [opened, edited]
  pull_request:
    types: [opened, synchronize, reopened]
  workflow_dispatch:   # manual trigger for agent tasks
jobs:
  pre-review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run Copilot preâ€‘review
        id: review
        uses: github/copilot-custom-action@v1
        with:
          mode: preâ€‘review
          targets: |
            *.html
            *.css
            *.js
            *.md
          checks: |
            htmlâ€‘modernisation
            seoâ€‘audit
            cssâ€‘theming
            accessibilityâ€‘a11y
2ï¸âƒ£ Inline Fix Suggestions
(automatically generated by the preâ€‘review step â€“ no extra config needed)

3ï¸âƒ£ Full Site Audit (run on PR review)
name: copilot-full-audit
on:
  pull_request_review:
    types: [submitted]
    branches: [main]

jobs:
  audit:
    if: github.event.review.state == 'approved'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Copilot full audit
        uses: github/copilot-custom-action@v1
        with:
          mode: fullâ€‘audit
          report: true
4ï¸âƒ£ Theme Generation Job (postâ€‘merge)
name: generate-tiller-theme
on:
  push:
    branches: [main]
  schedule:
    - cron: '0 2 * * *'   # daily at 02:00 UTC

jobs:
  build-theme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install PostCSS & Tailwind
        run: npm ci
      - name: Build unified theme
        run: npm run build:theme   # <-- ensure this script exists
      - name: Commit built assets
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "chore: update Tillerstead theme v${{ env.THEME_VERSION }}"
          file_pattern: dist/css/*.css
5ï¸âƒ£ Nightly Health Check (optional)
name: nightly-health-check
on:
  schedule:
    - cron: '30 3 * * *'   # 03:30 UTC

jobs:
  health:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Copilot health scan
        uses: github/copilot-custom-action@v1
        with:
          mode: healthâ€‘scan
          target: https://tillerstead.example.com   # â† replace with your live URL
      - name: Autoâ€‘open issue if needed
        if: steps.health.outputs.issues != ''
        uses: peter-evans/create-issue-from-file@v4
        with:
          title: "âš ï¸ Nightly health check â€“ detected regressions"
          content-filepath: ${{ steps.health.outputs.report_path }}
ğŸŒ SEO & Performance Bestâ€‘Practices (enforced by Copilot)
HTML5 semantic structure (<header>, <nav>, <main>, <footer>).
Lazyâ€‘load nonâ€‘critical images (loading="lazy" + srcset).
Async/Defer JavaScript (type="module" + defer).
Criticalâ€‘CSS inlining for first paint.
Preload fonts & hero images (rel="preload").
Complete Open Graph / Twitter Card meta tags.
JSONâ€‘LD schema.org (Organization, LocalBusiness, BreadcrumbList).
Canonical URLs, proper robots.txt.
Performance budgets: LCPâ€¯<â€¯2.5â€¯s, TTIâ€¯<â€¯3â€¯s, CLSâ€¯<â€¯0.1.
ğŸ¨ Brandâ€‘Centric CSS Theme Blueprint
/* --------------------------------------------------------------
   TILLERSTEAD â€“ Global Design Tokens
   ------------------------------------------------------------ */
:root {
  --tiller-primary:   #0066cc;      /* Deep blue â€“ trust & professionalism */
  --tiller-accent:    #ffaa00;      /* Warm amber â€“ friendly highlight */
  --tiller-neutral:   #f8f9fa;      /* Light gray background */
  --tiller-dark:      #212529;      /* Text darkness for contrast */
  --tiller-font:      "Inter", system-ui, sans-serif;
  --tiller-radius:    .5rem;
  --tiller-shadow:    0 4px 12px rgba(0,0,0,.08);
}

/* --------------------------------------------------------------
   Base resets â€“ modern, minimal
   ------------------------------------------------------------ */
*, *::before, *::after { box-sizing: border-box; }
html { font-size: 100%; scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: var(--tiller-font);
  color: var(--tiller-dark);
  background-color: var(--tiller-neutral);
}

/* --------------------------------------------------------------
   Components â€“ use tokens everywhere
   ------------------------------------------------------------ */
button,
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .5rem 1rem;
  border: none;
  border-radius: var(--tiller-radius);
  background: var(--tiller-primary);
  color: #fff;
  cursor: pointer;
  transition: background .2s ease;
}
button:hover,
.btn:hover { background: var(--tiller-accent); }

.card {
  background: #fff;
  border-radius: var(--tiller-radius);
  box-shadow: var(--tiller-shadow);
  overflow: hidden;
}

/* --------------------------------------------------------------
   Utilities â€“ keep them tiny and composable
   ------------------------------------------------------------ */
.u-text-center { text-align: center; }
.u-mt-1 { margin-top: .5rem; }
.u-px-2 { padding-left: .75rem; padding-right: .75rem; }
Import in every HTML page:

<link rel="preload" href="/css/tiller-theme.css" as="style" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="/css/tiller-theme.css"></noscript>
ğŸ› ï¸ Additional Commands & Toâ€‘Do Completion
Below are readyâ€‘toâ€‘run commands that finish the remaining items on your personal toâ€‘do list. Insert them wherever they make sense (local dev machine, CI pipeline, or a separate GitHub Action file).

âœ… 1ï¸âƒ£ Initialise the repo with the new instructions folder
# From the repo root
mkdir -p .github/instructions
cat > .github/instructions/copilot-custom.instructions.md <<'EOS'
# (Paste the full markdown content from this file)
EOS

git add .github/instructions/copilot-custom.instructions.md
git commit -m "docs: add Copilotâ€¯CUSTOM automation guide"
git push origin main
âœ… 2ï¸âƒ£ Add the npm scripts referenced in the theme job
Edit package.json and insert (or adjust) the following under "scripts":

{
  "scripts": {
    "build:theme": "postcss src/css/tiller-theme.css -o dist/css/tiller-theme.min.css && terser dist/css/tiller-theme.min.css -c -m -o dist/css/tiller-theme.min.css",
    "lint:html": "htmlhint '**/*.html'",
    "lint:css": "stylelint '**/*.css' --fix"
  }
}
Then install the required dev dependencies:

npm i -D postcss-cli autoprefixer cssnano terser htmlhint stylelint stylelint-config-standard
âœ… 3ï¸âƒ£ Run a oneâ€‘off lint & fix across the existing codebase
npm run lint:html   # shows HTML issues
npm run lint:css    # autoâ€‘fixes most CSS problems
âœ… 4ï¸âƒ£ Generate a baseline SEO report (once)
Create a small Node script scripts/seo-report.js:

// scripts/seo-report.js
const { execSync } = require('child_process');
const glob = require('glob');
const fs = require('fs');

const files = glob.sync('**/*.html', { ignore: ['node_modules/**', 'dist/**'] });
let report = '# SEO Baseline Report\n\n';

files.forEach(f => {
  const content = fs.readFileSync(f, 'utf8');
  const hasTitle = /<title[^>]*>.*<\/title>/i.test(content);
  const hasMetaDesc = /<meta\s+name=["']description["']/i.test(content);
  const hasOG = /<meta\s+property=["']og:/i.test(content);
  report += `## ${f}\n`;
  report += `- Title tag: ${hasTitle ? 'âœ…' : 'âŒ'}\n`;
  report += `- Meta description: ${hasMetaDesc ? 'âœ…' : 'âŒ'}\n`;
  report += `- Open Graph tags: ${hasOG ? 'âœ…' : 'âŒ'}\n\n`;
});

fs.writeFileSync('SEO-baseline.md', report);
console.log('âœ… SEO baseline saved to SEO-baseline.md');
Run it:

node scripts/seo-report.js
You now have a markdown file (SEO-baseline.md) you can attach to the first preâ€‘review issue.

âœ… 5ï¸âƒ£ Wire the preâ€‘review workflow to autoâ€‘create an issue for missing SEO data
Add a tiny helper action (can be placed in the same workflow file as the preâ€‘review step):

- name: Autoâ€‘open SEO checklist issue
  if: steps.review.outputs.report != ''   # assumes the action outputs a report path
  uses: peter-evans/create-issue-from-file@v4
  with:
    title: "ğŸ” SEO checklist for #${{ github.event.issue.number }}"
    content-filepath: ${{ steps.review.outputs.report }}
    labels: seo,automation
âœ… 6ï¸âƒ£ Deploy the site to GitHub Pages (optional but common for static sites)
name: deploy-to-pages
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install deps & build
        run: |
          npm ci
          npm run build:theme   # ensures the latest CSS is bundled
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./dist   # adjust if your build output folder differs
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
âœ… 7ï¸âƒ£ Final sanityâ€‘check script (run locally before pushing)
#!/usr/bin/env bash
set -euo pipefail

echo "ğŸ” Running HTML & CSS linters..."
npm run lint:html
npm run lint:css

echo "ğŸš€ Building theme..."
npm run build:theme

echo "ğŸ“Š Generating SEO baseline..."
node scripts/seo-report.js

echo "âœ… All checks passed. Ready to push!"
Save it as scripts/check-all.sh, make it executable (chmod +x scripts/check-all.sh), and run it whenever you want a quick â€œall clearâ€.
